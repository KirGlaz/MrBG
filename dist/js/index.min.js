"use strict";var burgerbtn=document.querySelector("#burgerbtn"),menuphone=document.querySelector("#menuphone"),mlink=document.querySelectorAll(".m-link");burgerbtn.addEventListener("click",function(e){e.preventDefault()});for(var i=0;i<mlink.length;i++)mlink[i].addEventListener("click",function(e){menuphone.style.display="none"});burgerbtn.addEventListener("click",function(){menuphone.style.display="block"}),closebtn.addEventListener("click",function(){menuphone.style.display="none"});var left=document.querySelector("#left"),right=document.querySelector("#right"),inSlider=document.querySelector("#inSlider");left.addEventListener("click",function(e){e.preventDefault()}),right.addEventListener("click",function(e){e.preventDefault()});var minRight=0,maxRight=3840,step=960,currentRight=0;inSlider.style.right=currentRight,right.addEventListener("click",function(){currentRight<maxRight&&(currentRight+=step,inSlider.style.right=currentRight+"px")}),left.addEventListener("click",function(){minRight<currentRight&&(currentRight-=step,inSlider.style.right=currentRight+"px")});var liMenu=document.querySelectorAll(".vertical-accordeon__item"),oneLi=document.querySelector(".vertical-accordeon__item"),bmenu=document.querySelectorAll(".vertical-accordeon__trigger"),ulmenu=document.querySelector(".vertical-accordeon__list"),span=document.querySelectorAll(".vertical-accordeon__title");for(i=0;i<liMenu.length;i++)liMenu[i].addEventListener("click",function(e){e.preventDefault()});for(i=0;i<bmenu.length;i++)bmenu[i].addEventListener("click",function(e){e.preventDefault()});ulmenu.addEventListener("click",function(e){var t=e.target.closest("a");if(t){var n=t.parentNode;if(n.classList.contains("vertical-accordeon__item_active"))n.classList.remove("vertical-accordeon__item_active");else{var l=!0,o=!1,i=void 0;try{for(var r,a=liMenu[Symbol.iterator]();!(l=(r=a.next()).done);l=!0){r.value.classList.remove("vertical-accordeon__item_active")}}catch(e){o=!0,i=e}finally{try{l||null==a.return||a.return()}finally{if(o)throw i}}n.classList.add("vertical-accordeon__item_active")}}});var liCommand=document.querySelectorAll(".command-acco__item"),oneCommand=document.querySelector(".command-acco__item"),aCommand=document.querySelectorAll(".command-acco__trigger"),ulCommand=document.querySelector(".command-acco");for(i=0;i<liCommand.length;i++)liCommand[i].addEventListener("click",function(e){e.preventDefault()});for(i=0;i<aCommand.length;i++)aCommand[i].addEventListener("click",function(e){e.preventDefault()});ulCommand.addEventListener("click",function(e){var t=e.target.closest("a");if(t){var n=t.parentNode;if(n.classList.contains("command-acco__item_active"))n.classList.remove("command-acco__item_active");else{var l=!0,o=!1,i=void 0;try{for(var r,a=liCommand[Symbol.iterator]();!(l=(r=a.next()).done);l=!0){r.value.classList.remove("command-acco__item_active")}}catch(e){o=!0,i=e}finally{try{l||null==a.return||a.return()}finally{if(o)throw i}}n.classList.add("command-acco__item_active")}}});var myform=document.querySelector("#myform"),order=document.querySelector("#order"),clean=document.querySelector("#clean"),answer=document.querySelector("#answer"),closeform=document.querySelector("#closeform"),answerall=document.querySelector("#answerall"),answerallno=document.querySelector("#answerallno");function validateForm(e){var t=!0;return validateField(e.elements.name)||(t=!1),validateField(e.elements.phone)||(t=!1),validateField(e.elements.comment)||(t=!1),t}function validateField(e){return e.checkValidity()?!(e.nextElementSibling.textContent=""):(e.nextElementSibling.textContent=e.validationMessage,!1)}closeform.addEventListener("click",function(e){e.preventDefault(),answerall.style.display="none"}),order.addEventListener("click",function(e){if(e.preventDefault(),validateForm(myform)){var t=new FormData;t.append("name",myform.elements.name.value),t.append("phone",myform.elements.phone.value),t.append("comment",myform.elements.comment.value),t.append("to","my@gmail.com");var n=new XMLHttpRequest;n.responseType="json",n.open("POST","https://webdev-api.loftschool.com/sendmail"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(t),n.addEventListener("load",function(){n.response.status?(answerall.style.display="flex",myform.reset()):answerallno.style.display="flex"})}}),clean.addEventListener("click",function(e){e.preventDefault()});var feedbackExit=document.querySelector(".popup__exit--feedback"),popupFeedback=document.querySelector(".feedback-popup"),feedbackButtons=document.querySelectorAll(".btn-rev"),reviews=document.querySelectorAll(".rewiews__hover");feedbackExit.addEventListener("click",function(){popupFeedback.style.display="none"});for(var _loop=function(o){feedbackButtons[o].addEventListener("click",function(){popupFeedback.style.display="flex";var e=document.querySelector(".feedback-popup__name"),t=document.querySelector(".feedback-popup__text"),n=document.querySelectorAll(".rewiews__text"),l=document.querySelectorAll(".title-rewiews");e.textContent=l[o].textContent,t.textContent=n[o].textContent})},_i=0;_i<feedbackButtons.length;_i++)_loop(_i);var sections=$(".section"),display=$(".maincontent"),mobileDetect=new MobileDetect(window.navigator.userAgent),isMobile=mobileDetect.mobile(),countPositionPercent=function(e){return"".concat(-100*e,"%")},switchActiveClass=function(e,t){e.eq(t).addClass("activescroll").siblings().removeClass("activescroll")},unBlockScroll=function(){setTimeout(function(){inscroll=!1},1300)},performTransition=function(e){if(!inscroll){inscroll=!0;var t=countPositionPercent(e);switchActiveClass(sections,e),switchActiveClass($(".fixed-menu__item"),e),display.css({transform:"translateY(".concat(t,")")}),unBlockScroll()}},scrollViewport=function(e){var t=sections.filter(".activescroll"),n=t.next(),l=t.prev();"next"===e&&n.length&&performTransition(n.index()),"prev"===e&&l.length&&performTransition(l.index())};$(document).on({wheel:function(e){var t=e.originalEvent.deltaY;scrollViewport(0<t?"next":"prev")},keydown:function(e){var t=e.target.tagName.toLowerCase();if(!("input"===t||"textarea"===t))switch(e.keyCode){case 40:scrollViewport("next");break;case 38:scrollViewport("prev")}}}),$("[data-scroll-to]").on("click",function(e){e.preventDefault(),performTransition(parseInt($(e.currentTarget).attr("data-scroll-to")))}),isMobile&&(window.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1}),$("body").swipe({swipe:function(e,t){var n;"up"===t&&(n="next"),"down"===t&&(n="prev"),scrollViewport(n)}}));var video=document.querySelector(".video__display"),bigPlayBtn=document.querySelector(".video__playbtn"),smallPlayBtn=document.querySelector(".video__controlls-play-play"),smallPauseBtn=document.querySelector(".video__controlls-play-pause"),volumeBtn=document.querySelector(".video__controlls-volume"),poster=document.querySelector(".video__controlls-volume"),circleProgress=document.querySelector(".video__controlls-circle--progress"),progressBar=document.querySelector(".video__controlls-bar--progress"),circleVolume=document.querySelector(".video__controlls-circle--volume"),volumeBar=document.querySelector(".video__controlls-bar--volume");circleVolume.style.left="30%";var currentVolume=.3;video.volume=currentVolume,bigPlayBtn.addEventListener("click",function(e){e.preventDefault(),video.play(),bigPlayBtn.style.display="none",smallPauseBtn.style.display="block",smallPlayBtn.style.display="none"}),video.addEventListener("click",function(){video.paused?(video.play(),bigPlayBtn.style.display="none",smallPlayBtn.style.display="none",smallPauseBtn.style.display="block"):(video.pause(),bigPlayBtn.style.display="block",smallPlayBtn.style.display="block",smallPauseBtn.style.display="none")}),video.addEventListener("timeupdate",function(){var e=video.currentTime/video.duration;circleProgress.style.left=100*e+"%"}),smallPlayBtn.addEventListener("click",function(e){e.preventDefault(),video.paused?(video.play(),bigPlayBtn.style.display="none",this.style.display="none",smallPauseBtn.style.display="block"):video.pause()}),smallPauseBtn.addEventListener("click",function(e){e.preventDefault(),video.paused?video.play():(video.pause(),this.style.display="none",smallPlayBtn.style.display="block",bigPlayBtn.style.display="block")}),progressBar.addEventListener("click",function(e){video.paused&&(bigPlayBtn.style.display="none",smallPauseBtn.style.display="block",smallPlayBtn.style.display="none");var t=this.offsetWidth,n=e.offsetX;circleProgress.style.left=100*n/t+"%",video.currentTime=video.duration*n/t,video.play()}),volumeBar.addEventListener("click",function(e){var t=this.offsetWidth,n=e.offsetX;circleVolume.style.left=100*n/t+"%",currentVolume=n/t,video.volume=currentVolume,volumeBtn.classList.remove("active")}),volumeBtn.addEventListener("click",function(){this.classList.toggle("active"),this.classList.contains("active")?video.volume=0:video.volume=currentVolume}),ymaps.ready(init);var placemarks=[{latitude:59.98,longitude:30.29,hintContent:'<div class="map__hint">Ул. Литераторов д.15</div>',balloonContent:"Самые вкусные бургеры у нас, приходите по адресу: ул. Литераторов, д. 15"},{latitude:59.94,longitude:30.38,hintContent:'<div class="map__hint">Ул. Пушкина д.17</div>',balloonContent:"Самые вкусные бургеры у нас, приходите по адресу: ул. Пушкина, д. 17"},{latitude:59.89,longitude:30.25,hintContent:'<div class="map__hint">Ул. Хлопушкина д.19</div>',balloonContent:"Самые вкусные бургеры у нас, приходите по адресу: ул. Хлопушкина, д. 19"}];function init(){var n=new ymaps.Map("map",{center:[59.92,30.31],zoom:12,controls:["zoomControl"],behaviors:["drag"]});placemarks.forEach(function(e){var t=new ymaps.Placemark([e.latitude,e.longitude],{hintContent:'<div class="map__hint">Ул. Литераторов д.15</div>',balloonContent:"Самые вкусные бургеры у нас, приходите по адресу: ул. Литераторов, д. 15"},{iconLayout:"default#image",iconImageHref:"./img/touch.svg",iconImageSize:[46,57],iconImageOffset:[-23,-57]});n.geoObjects.add(t)})}